# 행렬의 4대 기본 부분공간 (The Four Fundamental Subspaces)

`Span`, `선형 독립`, `기저`의 개념을 이해했다면, 이제 행렬 `A`가 정의하는 가장 중요한 4개의 부분공간을 이해할 준비가 된 것입니다. 

이 공간들은 행렬 변환이 

1. 어디서 와서(Row Space), 
2. 어디로 가며(Column Space), 
3. 무엇이 사라지고(Null Space), 
4. 어디에 도달하지 못하는지(Left Null Space)

에 대한 완벽한 그림을 제공합니다.

## prerequisites) 행 벡터 & 열 벡터 & 영 벡터

### 열벡터 (Column Vector)
열벡터는 숫자를 **세로**로 나열한 것입니다. 선형대수학에서 특별한 언급 없이 '벡터'라고 하면 보통 **열벡터**를 의미합니다. 행렬 변환 $A\vec{x}$ 에서의 벡터 $\vec{x}$가 바로 열벡터입니다.

$$ \begin{bmatrix} 1 \\ 2 \\ 3 \end{bmatrix} $$

### 행벡터 (Row Vector)
행벡터는 숫자를 **가로**로 나열한 것입니다. 주로 벡터를 전치(Transpose)하거나, 점곱(dot product)을 표현할 때 $ \vec{v}^T $ 와 같이 사용됩니다.

$$ \begin{bmatrix} 1 & 2 & 3 \end{bmatrix} $$

### 영벡터 (Zero Vector)
영벡터($\vec{0}$)는 모든 성분이 **0**인 특별한 벡터입니다.
* **기하학적 의미**: 좌표 공간의 **원점(Origin)**입니다.
* **대수적 의미**: 벡터의 덧셈에 대한 항등원입니다 ($\vec{v} + \vec{0} = \vec{v}$).

$$ \begin{bmatrix} 0 \\ 0 \\ 0 \end{bmatrix} $$



## 1. Column Space (열공간): 변환의 도착지 🎯

**열공간 `Col(A)`** 은 행렬 A의 **열벡터(column vectors)들이 Span하는 공간**입니다.

* **핵심 질문**: "행렬 A가 어떤 벡터 `x`를 변환시켰을 때, 그 결과물 `b`가 존재할 수 있는 모든 가능한 위치는 어디인가?"
* **의미**: `Ax = b`에서 가능한 **모든 출력(output) 벡터 `b`들의 집합**입니다. 즉, 변환의 '치역(range)' 또는 '이미지(image)'와 같습니다.
* **Rank와의 관계**: **열공간의 차원(dimension)이 바로 행렬의 Rank**입니다. `rank(A) = dim(Col(A))`.
* **해의 존재 여부**: 선형 시스템 `Ax = b`의 해가 존재할 조건은 **벡터 `b`가 행렬 A의 열공간 안에 포함될 때**입니다.

$$ \text{Col}(A) = \text{span}(\vec{a}_1, \vec{a}_2, \dots, \vec{a}_n) $$
*($\vec{a}_i$는 A의 열벡터들)*


## 2. Null Space (영공간): 변환의 소멸점 ⚫

**영공간 `Nul(A)`** 은 행렬 A에 의해 변환되었을 때 **원점(영벡터)으로 가는 모든 입력 벡터 `x`들의 집합**입니다.

* **핵심 질문**: "어떤 벡터 `x`들이 변환 후 흔적도 없이 원점으로 사라지는가?"
* **의미**: `Ax = 0`을 만족하는 모든 해 `x`의 집합입니다. 이 공간에 영벡터 외의 다른 벡터가 존재한다면, 그 변환은 여러 개의 다른 입력 값을 하나의 출력 값(원점)으로 뭉개버리는 **'정보 손실'** 이 있는 변환입니다.
* **가역성(Invertibility)과의 관계**: 정사각형 행렬에서 Null Space에 영벡터 외의 벡터가 존재하면, 그 행렬은 여러 입력을 하나로 합치므로 역변환이 불가능합니다. 이는 곧 `$det(A)=0$` 이고 `rank(A) < n` 임을 의미합니다.

$$ \text{Nul}(A) = \{\vec{x} \in \mathbb{R}^n \mid A\vec{x} = \vec{0}\} $$


## 3. Row Space (행공간): 변환의 실질적 출발지 🚀

**행공간 `Row(A)`** 은 행렬 A의 **행벡터(row vectors)들이 Span하는 공간**입니다.

* **의미**: 입력 벡터 `x`가 존재하는 전체 공간($\mathbb{R}^n$)에서, **실제로 Column Space로 의미 있게 변환되는 '핵심적인' 부분**입니다.
* **Rank와의 관계**: 놀랍게도 **행공간의 차원은 열공간의 차원과 항상 같으며, 이 또한 Rank**입니다. `rank(A) = dim(Row(A))`.
* **핵심 관계**: **Row Space는 Null Space와 항상 직교(orthogonal)** 합니다. 즉, 입력 공간 $\mathbb{R}^n$은 '의미 있는 변환이 일어나는 공간(Row Space)'과 '원점으로 붕괴되는 공간(Null Space)'이라는 두 개의 수직인 공간으로 나뉩니다.

$$ \text{Row}(A) = \text{span}(\text{rows of }A) = \text{Col}(A^T) $$


## 4. Left Null Space (좌측 영공간): 도달 불가능한 영역 🚫

**좌측 영공간 `Nul(Aᵀ)`** 은 행렬 A의 **전치행렬(Transpose, $A^T$)의 영공간** 입니다.

* **핵심 질문**: "출력 공간에서, 절대 결과물 `b`가 될 수 없는 '빈 공간'은 어떤 방향인가?"
* **의미**: **Column Space에 직교(orthogonal)하는 공간**입니다. Column Space가 '모든 도착 가능한 지점'들의 집합이라면, Left Null Space는 그 도착지들과 수직을 이루는 '도달 불가능한 방향'들의 집합입니다.
    * 예를 들어, 2D 평면을 3D 공간 속의 특정 평면으로 변환할 때(Rank=2), 그 3D 공간에서 최종 결과 평면과 수직인 '선'이 바로 Left Null Space가 됩니다.
* **이름의 유래**: $A^T\vec{y} = \vec{0}$ 라는 정의에서 양변을 전치하면 $(\vec{y}^T A)^{T} = \vec{0}^T \implies \vec{y}^T A = \vec{0}$ 가 됩니다. 벡터 `y`가 행렬 `A`의 **왼쪽(left)**에 곱해지기 때문에 '좌측' 영공간이라 불립니다.

$$ \text{Nul}(A^T) = \{\vec{y} \in \mathbb{R}^m \mid A^T\vec{y} = \vec{0}\} $$


### prerequisites) 직교성의 이해 
Column Space와 Left Null Space 

"Left Null Space가 Column Space에 직교한다"는 말은, Left Null Space에 속한 **어떤 벡터**를 가져오든, Column Space에 속한 **어떤 벡터**와 내적(dot product)하면 그 결과가 **항상 0**이라는 의미입니다.

**직관적인 비유:**
* `Column Space`를 여러분 방의 **바닥 전체**라고 상상해 보세요. (2차원 평면)
* `Left Null Space`는 그 바닥을 수직으로 뚫고 서 있는 **하나의 깃대**라고 상상해 보세요. (1차원 직선)
* 바닥에 어떤 방향으로 선을 긋든(Column Space의 벡터), 그 선은 깃대(Left Null Space의 벡터)와 항상 **수직(직교)** 관계에 있습니다.

**간단한 수학적 증명:**
1.  **정의 복습**:
    * Left Null Space의 벡터 $\vec{y}$는 $A^T\vec{y} = \vec{0}$ 을 만족합니다.
    * Column Space의 벡터 $\vec{b}$는 어떤 벡터 $\vec{x}$에 대해 $\vec{b} = A\vec{x}$ 로 표현됩니다.

2.  **두 벡터의 내적 계산**:
    두 벡터가 직교하는지 보려면 내적이 0인지 확인하면 됩니다. 벡터 $\vec{y}$와 $\vec{b}$의 내적은 $\vec{y}^T \vec{b}$ 로 표현할 수 있습니다.

3.  **식 대입 및 증명**:
    $$
    \begin{aligned}
    \vec{y}^T \vec{b} &= \vec{y}^T (A\vec{x}) && \text{(b = Ax 대입)} \\
    &= (\vec{y}^T A)\vec{x} && \text{(행렬 곱셈의 결합 법칙)} \\
    &= (A^T \vec{y})^T \vec{x} && \text{(전치 행렬의 성질: } (MN)^T = N^T M^T \text{)} \\
    &= (\vec{0})^T \vec{x} && \text{(y는 Left Null Space의 원소이므로 } A^T\vec{y} = \vec{0} \text{)} \\
    &= 0 \cdot \vec{x} \\
    &= 0
    \end{aligned}
    $$
    결과가 0이므로, 두 벡터는 항상 직교합니다. 따라서 두 **공간**은 서로 직교합니다.


### 최종 요약

| 공간 (Space) | 구성 요소 | 핵심 의미 | `Ax = b` 와의 관계 | 차원 (Dimension) |
| :--- | :--- | :--- | :--- | :--- |
| **Column Space** | 열벡터들의 Span | 출력 `b`가 존재할 수 있는 공간 (도착지) | `b`는 반드시 이 공간 안에 있어야 함 | `rank(A)` |
| **Null Space** | `Ax = 0`을 만족하는 `x` | 원점으로 붕괴되는 입력 `x`의 공간 (소멸점) | 동차 방정식의 해 집합 | `n - rank(A)` |
| **Row Space** | 행벡터들의 Span | 변환의 영향을 받는 실질적인 입력 `x`의 공간 (출발지) | Null Space에 직교하는 입력 공간 | `rank(A)` |
| **Left Null Space** | `Aᵀy = 0`을 만족하는 `y` | Column Space에 직교하는 공간 (도달 불가 영역) | `b`가 이 공간에 성분을 가지면 해 없음 | `m - rank(A)` |


# Q. 공간이 직교하는게 그래서 왜 중요함?
**직교성(Orthogonality)** 은 4대 기본 부분공간의 관계를 이해하는 데 있어 가장 중요한 핵심 개념

그래서 왜 중요?

이 직교성은 선형대수의 세계관을 지탱하는 두 개의 큰 기둥입니다. 직교성 덕분에 우리는 복잡한 벡터와 변환 문제를 **'서로 간섭 없는 독립적인 부분'으로 깔끔하고 유일하게 분해**해서 생각할 수 있게 됩니다.


## 1. 변환 전 (입력 공간): Row Space `⟂` Null Space

이것은 **입력 공간($\mathbb{R}^n$)** 에 대한 이야기입니다.

### 무슨 의미인가요?

모든 입력 벡터 $\vec{x}$를 **'변환 후 살아남는 성분'($\vec{x}_{row}$)과 '변환 후 0으로 사라지는 성분'($\vec{x}_{null}$)으로 유일하게(uniquely) 분해**할 수 있다는 뜻입니다.

> **비유: 셰프의 재료 손질**
> * **입력 벡터 $\vec{x}$**: 통닭 한 마리
> * **Row Space 성분 $\vec{x}_{row}$**: 요리에 사용할 **살코기**
> * **Null Space 성분 $\vec{x}_{null}$**: 어차피 버려질 **뼈**
>
> 이 둘이 직교한다는 것은, '살코기'와 '뼈'가 서로 겹치지 않아 완벽하게 분리할 수 있다는 의미입니다.

### 왜 중요한가요?

* **효율적인 분석**: 행렬 변환 $A$가 벡터 $\vec{x}$에 가해질 때, Null Space에 속한 성분($\vec{x}_{null}$)은 결과에 아무런 영향을 주지 못하고 사라집니다.
    $$A\vec{x} = A(\vec{x}_{row} + \vec{x}_{null}) = A\vec{x}_{row} + \vec{0}$$
    즉, 최종 결과물은 오직 Row Space 성분에 의해서만 결정됩니다. 변환의 '핵심'과 '잉여'를 명확히 구분할 수 있습니다.

* **유일한 분해 보장**: 직교성 덕분에, 어떤 벡터 $\vec{x}$를 $\vec{x}_{row}$와 $\vec{x}_{null}$로 나누는 방법은 **오직 한 가지**밖에 없습니다. 이 '유일성'은 모든 수학적 분석의 안정성과 예측 가능성을 보장합니다.


## 2. 변환 후 (출력 공간): Column Space `⟂` Left Null Space

이것은 **출력 공간($\mathbb{R}^m$)** 에 대한 이야기입니다.

### 무슨 의미인가요?

출력 공간 전체가 **'변환을 통해 도달 가능한 영역'(Column Space)** 과 **'절대 도달 불가능한 영역'(Left Null Space)** 으로 완벽하게 나뉜다는 뜻입니다.

> **비유: 자판기**
> * **변환 $A$**: 특정 음료수 자판기
> * **Column Space**: 자판기 안에 **실제로 채워져 있는 음료수들** (도달 가능한 결과)
> * **Left Null Space**: 비어있는 음료수 슬롯, 즉 **이 자판기로는 절대 뽑을 수 없는 음료수 종류** (도달 불가능한 결과)
>
> 이 둘이 직교한다는 것은, "재고 있음"과 "재고 없음"이 명확히 구분된다는 의미입니다.

### 왜 중요한가요?

* **`Ax = b` 해의 존재 여부 판단**: 이 직교성은 방정식 $A\vec{x} = \vec{b}$에 해가 있는지 없는지를 즉시 판단하게 해줍니다.
    * 우리가 원하는 결과 벡터 $\vec{b}$가 전부 Column Space 안에 있다면 (자판기에 재고가 있다면), 해 $\vec{x}$는 **존재합니다.**
    * 만약 벡터 $\vec{b}$가 조금이라도 Left Null Space 방향의 성분을 가지고 있다면 (없는 음료수를 원한다면), 그 벡터는 절대 도달할 수 없는 위치이므로 해 $\vec{x}$는 **존재하지 않습니다.**

* **최적의 근사해 도출 (Least Squares)**: 해가 존재하지 않을 때, "원하는 결과 $\vec{b}$와 가장 가까운, 도달 가능한 지점은 어디인가?"를 물을 수 있습니다. 직교성을 이용하면 $\vec{b}$를 Column Space에 정사영(projection)시켜 **가장 오차가 적은 근사해**를 찾을 수 있습니다. 이 '최소제곱법'은 데이터 과학과 공학 전반에서 데이터를 분석하는 데 가장 중요하게 사용되는 기법 중 하나입니다.

