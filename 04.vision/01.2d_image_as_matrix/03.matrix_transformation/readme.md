# step12. affine transformation
## a. what
```python
# 2. 어떤 변환을 할지 결정하는 3x3 행렬 'M'을 생성
M_affine = create_transformation_matrix(angle_deg=20, scale_x=1.2, scale_y=0.8, shear_x=0.3, tx=1, ty=1)
```
- "20도 회전, 가로 1.2배, 세로 0.8배, 0.3만큼 찌그러트리고, x로 1, y로 1만큼 이동"이라는 복잡한 명령을 단 하나의 3x3 행렬 M_affine으로 만듭니다.
- 동차 좌표계의 원리를 이용해 모든 변환을 행렬 곱셈으로 통합한 결과물


## b. 코드의 핵심 원리

### a-1. 역매핑 (Inverse Mapping)
"20도 회전, 가로 1.2배, 세로 0.8배, 0.3만큼 찌그러트리고, x로 1, y로 1만큼 이동"이라는 복잡한 명령을 단 하나의 3x3 행렬 M_affine으로 만듭니다.
- 순방향 매핑 (우리가 생각하기 쉬운 방식): 원본 이미지의 (x,y) 픽셀을 변환해서 출력 이미지의 (u,v)로 옮긴다.
    - 문제점: 이 방식으로 옮기면 출력 이미지에 픽셀이 없는 빈 공간(hole)이 생기거나, 여러 개의 입력 픽셀이 한 출력 픽셀 자리를 놓고 싸우는 문제가 발생합니다.
- 역매핑 (컴퓨터가 실제로 사용하는 방식):
    - "출력 이미지의 (u,v) 좌표에 어떤 색을 칠해야 할까? 그 색은 원본 이미지의 어디 (x,y)에서 가져와야 할까?"


